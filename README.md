# Условия использования 

Применять только в учебных целях. Данных код может содержать ошибки, авторы не несут никакой ответственности за любые последствия использования этого кода.
Условия использования и распространения - MIT лицензия (см. файл LICENSE).

## Настройка и запуск

### Системные требования

Данный пример разработан и проверен на ОС Ubuntu 20.04.5, авторы предполагают, что без каких-либо изменений этот код может работать на любых Debian-подобных OS, для других Linux систем, а также для MAC OS необходимо использовать другой менеджер пакетов. В Windows необходимо самостоятельно установить необходимое ПО или воспользоваться виртуальной машиной с Ubuntu (также можно использовать WSL версии не ниже 2).

### Используемое ПО

Стандартный способ запуска демо предполагает наличие установленного пакета *docker*, а также *docker-compose*. Для автоматизации типовых операций используется утилита *make*, хотя можно обойтись и без неё, вручную выполняя соответствующие команды из файла Makefile в командной строке.

Другое используемое ПО (в Ubuntu будет установлено автоматически, см. следующий раздел):
- python (желательно версия не ниже 3.8)
- pipenv (для виртуальных окружений python)

Для работы с кодом примера рекомендуется использовать VS Code или PyCharm.

В случае использования VS Code следует установить расширения
- REST client
- Docker
- Python

### Настройка окружения и запуск примера

В терминале перейдите в папку проекта и выполните команду

```bash
make all
```

В результате будет создано виртуальное окружение для этого проекта, собраны необходимые docker образы, запущен пример и автоматический тест.

Вывод должен быть похож на изображённый в следующей картинке, числа могут отличаться, т.к. генерируются случайным образом.

![Результат выполнения команды](./docs/images/run-results.png)

### REST запросы

Для ручного тестирования в VS Code откройте файл requests.rest, при наведении мышкой на GET и POST запросы появится текст 'Send request', при нажатии на него запрос будет выполнен.

Диаграмма последовательности данного примера имеет следующий вид:

//www.plantuml.com/plantuml/png/N8f12iD024NtSuevIc_G8mGnFo0aewWDzFQjp6hYol_UUqMIv-SwMoDEzJxlRN2gIT6rsJyH5gEHVSSjZEBpM-GX9xQ0t_0gZbYikIOuHSSMtqXSrTZQ1DDEnHyOurTQ5UH63GJ1-xnYxei_m07n699Jn4Ro1-A5nIiPaGiI28b0o0SS4fE9ZUqlTF-8wcwpzjfUoL4ETYOptTLLNJtUsDZOohcrZrvr55QhbvwkUKCvN_36sMP_ZCCVV44D_QO2VqlAFTMKKqM1KpoN7cUtL6j4HGLMWHxTsNfzxkbgV89mpNwaUzdWRAxUTyt89RQLqhoZW0sKTYTdySaafUT_9EdjczaSyFXB3PW4hEw4A2V02Pfa0cuueHR2Tt8w1p9HI8Ndzwgmakqnct1KmWs8v0CKW-MCjmU0Bu2eJXJq8BHXsZkin1TmRV3ghCmWBgZspWiS6zDQsoJT0lb6mftDnMhLBGw8VKPSBLvHiM0wEeGeqh9sNAYEdKaRec1-TVn-MH1mxgOc8sJ4uh-efxiwG4NiJsaYsbVnHstQnft788v7IkpBpBhirWTblm7a4wSUE0Ll9OHJh18gHPJwehvze62NntoQHpaI3ES1HBTgVOD_SavwVGDjfzQoBqYswKjcBYbVkjDuUkyu6qmmPtfTfO3W8B7q560gNI4vYXPzBLfrenKL5FRGow_ODGHiTLhhqUMmrWuXbr-k-NnOFhBaAprOppZjiqlpYV9d-Bq4_5bZCBRa7az5V_Q5-Wy0PqwLkzTuuzVi7m00

В соответствии с ней, логическая последовательность команд следующая: start -> { 2 * key_in (Не важен порядок) -> { 2 * key_out (Извлекать их не обязательно для завершения обновления, но желательно для корректной обработки состояний системы) }} -> stop

_Start_ загрузит приложение, уставки, настройки.

_Key in_ имитирует подключение аппаратного ключа, ключей два - Security - для специалиста по безопасности, Technical - для техника. 

Процесс обновления начинается в тот момент, когда оба ключа оказываются активированы.

_Key out_ имитирует извлечение ключа, что необходимо для корректного отображения состояния системы и ее продолжительной работы без перезапусков через start/stop.

_Stop_ останавливает все внутренние процессы и очищает значение переменных.
