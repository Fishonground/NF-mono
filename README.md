# Условия использования 

Применять только в учебных целях. Данных код может содержать ошибки, авторы не несут никакой ответственности за любые последствия использования этого кода.
Условия использования и распространения - MIT лицензия (см. файл LICENSE).

## Настройка и запуск

### Системные требования

Данный пример разработан и проверен на ОС Ubuntu 20.04.5, авторы предполагают, что без каких-либо изменений этот код может работать на любых Debian-подобных OS, для других Linux систем, а также для MAC OS необходимо использовать другой менеджер пакетов. В Windows необходимо самостоятельно установить необходимое ПО или воспользоваться виртуальной машиной с Ubuntu (также можно использовать WSL версии не ниже 2).

### Используемое ПО

Стандартный способ запуска демо предполагает наличие установленного пакета *docker*, а также *docker-compose*. Для автоматизации типовых операций используется утилита *make*, хотя можно обойтись и без неё, вручную выполняя соответствующие команды из файла Makefile в командной строке.

Другое используемое ПО (в Ubuntu будет установлено автоматически, см. следующий раздел):
- python (желательно версия не ниже 3.8)
- pipenv (для виртуальных окружений python)

Для работы с кодом примера рекомендуется использовать VS Code или PyCharm.

В случае использования VS Code следует установить расширения
- REST client
- Docker
- Python

### Настройка окружения и запуск примера

В терминале перейдите в папку проекта и выполните команду

```bash
make all
```

В результате будет создано виртуальное окружение для этого проекта, собраны необходимые docker образы, запущен пример и автоматический тест.

Вывод должен быть похож на изображённый в следующей картинке, числа могут отличаться, т.к. генерируются случайным образом.

![Результат выполнения команды](./docs/images/run-results.png)

### REST запросы

Для ручного тестирования в VS Code откройте файл requests.rest, при наведении мышкой на GET и POST запросы появится текст 'Send request', при нажатии на него запрос будет выполнен.

Диаграмма последовательности данного примера имеет следующий вид:

//www.plantuml.com/plantuml/png/dLLHRjD04FtVK-n_o0NuGBq1HwYiP2D5IcChQohnrmH28XdH7oGG4eNI2vYsfcv2d2lCteWtEsvg9uwKOCcmtfbvyzwytVJ4ni4eVdCsK2henE58o_CwCgE0FmEhGnKXfT_fHy4mrbrptkyOtfTLBTZh3yofDQDpuojxjXQDHc5iEd4_79xQjpOsPvmJrNDi9-W6lB-rROPMsCXAuGbr-rL9ejLwgUdQJIXr5swYPFCvZE0FTq45tLA6_nUKQbfHIalAtGplfKRiDxQGWSqCgvmUrI0C8qrNzOYaS_KZtVE6IvhwVVSLAUUkkRMR0_AMMoipiAQffEI_fsZORQm1ZxzKW4cErHqJTMFWvBv81DouCQqXVCxHNP06XPHfzzuhNFBsDfjyhuGR44ahA0Bh4ZUj0Ru08Zk1l0Uc3TFUOSM-W6k1Vqeh4uZBlVOdCn0NgYi_9nuNs1USh-Hej5hbeiRiC_9MR1Pb1noF4g7Tzcqbd7aXSz5MGuciFt-_90auTxikSqgT1QjYzADjhQ8YzoTF4VDRkez-QXCLMH3d5oqsRHfjLc6jxJU0V78p3PpCJJd5pR0Qqu95UMEySHyebziZHZMZx4c6zG025VQ-m4UAl8s-YhQUZEmBYkNuZHjkgRjKFRjxyLnIES8kyVUL6p0E2XUQSfXALoXkjm_wkLXxDzQiWl8DzE5tx1e2fW1Z_-ktGqPRXJpkTZNKm_8jJxxIWmpDpPxB5s8KfSSQVYJu_vo3_QRSurtIdwTEbPy0boZHNZud-C1Vjdy0

В соответствии с ней, логическая последовательность команд следующая: start -> { 2 * key_in (Не важен порядок) -> { 2 * key_out (Извлекать их не обязательно для завершения обновления, но желательно для корректной обработки состояний системы) }} -> stop

_Start_ загрузит приложение, уставки, настройки.

_Key in_ имитирует подключение аппаратного ключа, ключей два - Security - для специалиста по безопасности, Technical - для техника. 

Процесс обновления начинается в тот момент, когда оба ключа оказываются активированы.

_Key out_ имитирует извлечение ключа, что необходимо для корректного отображения состояния системы и ее продолжительной работы без перезапусков через start/stop.

_Stop_ останавливает все внутренние процессы и очищает значение переменных.
